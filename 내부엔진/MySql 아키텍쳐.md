# MySql 아키텍쳐

기본적으로 서버-클라이언트 구조이다. 데이터베이스가 서버역할 하며 데이터베이스에 연결하는 프로그램이 클라이언트이다. 서버는 크게 MySql 엔진과 스토리지 엔진으로 구분된다. 
- MySql 엔진은 요청된 sql을 분석하고 구문을 최적화하는 등 DBMS의 두뇌 역할
- 스토리지엔진은 실제 Data를 디스크 스토리지에 저장하거나 읽어오는 역할
엔진이 구별되기 때문에 엔진 간 데이터 요청 및 응답 과정이 필요함. MySql은 이러한 요청을 Handler, Handler API로 부른다.

---


### MySql 엔진

![image](https://github.com/Yuhyeingjoo/MySql-Study/assets/54518241/20c946e6-3a68-4530-a3ff-2529c8db8fea)

MySql 엔진은 Connection handler, SQL Interface, Parser, 쿼리 최적화 기능 등으로 구성된다. 스토리지 엔진은 동시에 여러 개 사용 가능하지만 MySql 엔진은 하나만 사용 가능하다.

1. Connection Pool
   아키텍쳐의 최상위 계층으로 클라이언트의 커넥션을 생성 및 관리, 요청된 쿼리를 처리한다. 또한 서버에 연결되는 클라이언트의 아이디, 패스워드 기반 인증 수행하며 해당 클라이언트가 요청한 쿼리를 실행할 권한이 있는지 확인한다. 
2. Sql Interface
   Command를 수신하고 클라이언트에게 결과를 전송하는 인터페이스. ANSI SQL을 준수한다.
3. Parser
   요청된 쿼리를 토큰으로 분리하여 트리 구조로 만든다. 파서는 문법 오류도 감지한다.
4. Optimizer
   요청된 쿼리를 다시 작성하여 높은 속도와 낮은 비용으로 처리할 수 있게 한다.
5. 캐시&버퍼
   데이터 및 인덱스에 대해 빠르게 읽고 쓰기 위해 사용되는 메모리 공간. InnoDB의 Buffer Pool과 같은 보조 저장소이다.


### 스토리지 엔진

![image](https://github.com/Yuhyeingjoo/MySql-Study/assets/54518241/a2f5f0c7-1c85-4319-a9ce-1491a2862b4b)

위 그림과 같이 스토리지 엔진을 플러그인 방식으로 사용한다.
$ show engines;
명령을 통해 사용 가능한 스토리지 엔진 목록을 확인할 수 있다. 
스토리지 엔진은 여러 개 동시에 사용 가능하다. 테이블이 사용할 스토리지 엔진을 설정하면 해당 테이블의 읽기 및 쓰기 작업은 설정된 스토리지 엔진이 처리한다. 스토리지 엔진 별로 작업 처리 방식이 다르기 때문에 성능 차이가 발생한다. 스토리지 엔진은 라이브러리를 다운하고 추가하는 방식으로 사용 및 업그레이드 가능하다. 
