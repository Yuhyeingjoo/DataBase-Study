# Memory


![image](https://github.com/Yuhyeingjoo/DataBase-Study/assets/54518241/2155f5d8-927b-4759-9270-16094dd99c05)
MySql은 다양한 메모리 영역을 가지고 있으며 각 영역의 값을 변경하여 성능을 향상시킬 수 있다. 일반적으로 메모리는 글로벌 메모리와 로컬 메모리로 구분된다.

1.	Global Memory
   글로벌 메모리는 클라이언트 스레드 수와 무관하게 공통으로 사용되는 하나의 메모리 공간이다. 서버가 시작될 때 운영체제로부터 할당되며 관련된 설정을 변경할 경우 서버를 재시작해야 한다. 글로벌 메모리는 하기로 구성된다.
    - InnoDB Buffe Pool: 데이터를 메모리 영역에 캐싱해서 빠르게 접근하기 위한 용도로 사용된다.
    - InnoDB Change Buffer: Insert, Delete, Update 같은 데이터 변경 작업 시 사용되는 메모리 영역이다. 데이터 변경 시 인덱스도 변경 내역에 반영되는데 관련 인덱스가 많다면 자원 소모가 커진다. 이러한 이유로 인덱스에 대한 작업 성능 향상을 목적으로 하는 메모리 공간이 해당 버퍼다.
    - InnoDB Adaptive Hash index: B-Tree Index의 약점을 보완하기 위한 기능으로 자주 사용되는 컬럼을 해시로 정의하여 데이터에 접근하도록 하는 기능이다. 자주 사용하는 데이터만 해시 값으로 설정한다.
    - Query 캐시: 쿼리가 수행되면 먼저 쿼리 캐시를 서치한다. 자주 사용하는 쿼리가 있을 경우 성능이 올라간다. 그러나 테이블 구조가 변경되면 캐시에 저장된 쿼리를 재사용할 수 없으므로 자주 변경되지 않는 테이블에서 사용이 용이하다.
    - Table 캐시: 테이블을 읽고 쓰려면 테이블을 열고 닫는 과정에서 오버헤드가 크다. 그래서 테이블 캐시는 데이터베이스에서 자주 액세스되는 테이블 데이터를 메모리에 보관하는 메커니즘입니다. 메모리에 데이터를 보관함으로써 디스크 액세스와 같은 느린 입출력 작업을 피하고, 데이터를 빠르게 검색할 수 있습니다

2. Local Memory
   로컬 메모리는 클라이언트 스레드가 쿼리를 처리하는데 사용되는 개별적인 메모리 공간이다. 클라이언트 메모리, 혹은 세션 메모리라고도 부른다. 로컬 메모리는 스레드 별로 독립적으로 할당되며 공유되지 않는다. 로컬 메모리 구성은 하기와 같다.
   - Sort Buffer: 소트 버퍼란 인덱스를 이용한 정렬이 불가능할 경우 별도의 정렬 작업을 하는데 이 때 사용되는 공간이다. SQL에서 ‘Order by’나 ‘Group by’ 키워드 사용하면 주로 해당 버퍼 쓰인다.
   - Join buffer: 조인으로 인한 새로운 테이블을 구성할 때 할당해서 사용된다.
   - Connection buffer, Result buffer: 서버는 클라이언트의 요청에 대해 스레드를 생성하는데 이때 각 스레드에는 해당 버퍼가 필요함. 네트워크 소켓을 통해 데이터를 전송하고 수신하는 데 필요한 임시 메모리 공간





